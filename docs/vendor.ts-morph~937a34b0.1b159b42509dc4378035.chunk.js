(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{WJv8:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const i=r("ejOz"),o=r("iQlM"),n=r("EboW"),s=r("1hU1"),a=r("lq8x"),c=r("qYB5"),h=r("r4RK"),l=r("MD6g"),d=r("mHdW"),u=r("846v");t.CompilerFactory=class{constructor(e){this.context=e,this.sourceFileCacheByFilePath=new c.KeyValueCache,this.diagnosticCache=new c.WeakCache,this.definitionInfoCache=new c.WeakCache,this.documentSpanCache=new c.WeakCache,this.diagnosticMessageChainCache=new c.WeakCache,this.jsDocTagInfoCache=new c.WeakCache,this.signatureCache=new c.WeakCache,this.symbolCache=new c.WeakCache,this.symbolDisplayPartCache=new c.WeakCache,this.referenceEntryCache=new c.WeakCache,this.referencedSymbolCache=new c.WeakCache,this.referencedSymbolDefinitionInfoCache=new c.WeakCache,this.typeCache=new c.WeakCache,this.typeParameterCache=new c.WeakCache,this.nodeCache=new l.ForgetfulNodeCache,this.sourceFileAddedEventContainer=new c.EventContainer,this.sourceFileRemovedEventContainer=new c.EventContainer,this.documentRegistry=new u.DocumentRegistry(e.fileSystemWrapper),this.directoryCache=new h.DirectoryCache(e),this.context.compilerOptions._onModified(()=>{const e=this.sourceFileCacheByFilePath.getValuesAsArray();for(const t of e)a.replaceSourceFileForCacheUpdate(t)})}*getSourceFilesByDirectoryDepth(){for(const e of this.getDirectoriesByDepth())yield*e.getSourceFiles()}getSourceFilePaths(){return Array.from(this.sourceFileCacheByFilePath.getKeys())}getChildDirectoriesOfDirectory(e){return this.directoryCache.getChildDirectoriesOfDirectory(e)}getChildSourceFilesOfDirectory(e){return this.directoryCache.getChildSourceFilesOfDirectory(e)}onSourceFileAdded(e,t=!0){t?this.sourceFileAddedEventContainer.subscribe(e):this.sourceFileAddedEventContainer.unsubscribe(e)}onSourceFileRemoved(e){this.sourceFileRemovedEventContainer.subscribe(e)}createSourceFile(e,t,r){if("string"==typeof(t=t instanceof Function?c.getTextFromStringOrWriter(this.context.createWriter(),t):t||""))return this.createSourceFileFromText(e,t,r);const i=this.context.createWriter();return this.context.structurePrinterFactory.forSourceFile({isAmbient:".d.ts"===c.FileUtils.getExtension(e)}).printText(i,t),this.createSourceFileFromText(e,i.toString(),r)}createSourceFileFromText(e,t,r){return e=this.context.fileSystemWrapper.getStandardizedAbsolutePath(e),!0===r.overwrite?this.createOrOverwriteSourceFileFromText(e,t,r):(this.throwIfFileExists(e),this.createSourceFileFromTextInternal(e,t,r))}throwIfFileExists(e,t){if(this.containsSourceFileAtPath(e)||this.context.fileSystemWrapper.fileExistsSync(e))throw t=null==t?"":t+" ",new n.InvalidOperationError(`${t}A source file already exists at the provided file path: ${e}`)}createOrOverwriteSourceFileFromText(e,t,r){e=this.context.fileSystemWrapper.getStandardizedAbsolutePath(e);const i=this.addOrGetSourceFileFromFilePath(e,r);return null!=i?(i.getChildren().forEach(e=>e.forget()),this.replaceCompilerNode(i,this.createCompilerSourceFileFromText(e,t,r.scriptKind)),i):this.createSourceFileFromTextInternal(e,t,r)}getSourceFileFromCacheFromFilePath(e){return e=this.context.fileSystemWrapper.getStandardizedAbsolutePath(e),this.sourceFileCacheByFilePath.get(e)}addOrGetSourceFileFromFilePath(e,t){e=this.context.fileSystemWrapper.getStandardizedAbsolutePath(e);let r=this.sourceFileCacheByFilePath.get(e);return null==r&&this.context.fileSystemWrapper.fileExistsSync(e)&&(this.context.logger.log(`Loading file: ${e}`),(r=this.createSourceFileFromTextInternal(e,this.context.fileSystemWrapper.readFileSync(e,this.context.getEncoding()),t))._setIsSaved(!0)),null!=r&&t.markInProject&&r._markAsInProject(),r}containsSourceFileAtPath(e){const t=this.context.fileSystemWrapper.getStandardizedAbsolutePath(e);return this.sourceFileCacheByFilePath.has(t)}containsDirectoryAtPath(e){const t=this.context.fileSystemWrapper.getStandardizedAbsolutePath(e);return this.directoryCache.has(t)}getSourceFileForNode(e){let t=e;for(;t.kind!==s.SyntaxKind.SourceFile;){if(null==t.parent)return;t=t.parent}return this.getSourceFile(t,{markInProject:!1})}hasCompilerNode(e){return this.nodeCache.has(e)}getExistingCompilerNode(e){return this.nodeCache.get(e)}getNodeFromCompilerNode(e,t){return e.kind===s.SyntaxKind.SourceFile?this.getSourceFile(e,{markInProject:!1}):this.nodeCache.getOrCreate(e,()=>{const e=r.call(this);return a.call(this,e),e});function r(){if(null!=e._commentKind)return o.CommentNodeParser.isCommentStatement(e)?new i.CommentStatement(this.context,e,t):o.CommentNodeParser.isCommentClassElement(e)?new i.CommentClassElement(this.context,e,t):o.CommentNodeParser.isCommentTypeElement(e)?new i.CommentTypeElement(this.context,e,t):o.CommentNodeParser.isCommentObjectLiteralElement(e)?new i.CommentObjectLiteralElement(this.context,e,t):o.CommentNodeParser.isCommentEnumMember(e)?new i.CommentEnumMember(this.context,e,t):n.throwNotImplementedForNeverValueError(e);return new(d.kindToWrapperMappings[e.kind]||i.Node)(this.context,e,t)}function a(r){if(null!=e.parent){this.getNodeFromCompilerNode(e.parent,t)._wrappedChildCount++}const i=r._getParentSyntaxListIfWrapped();if(null!=i&&i._wrappedChildCount++,e.kind===s.SyntaxKind.SyntaxList){let e=0;for(const t of r._getChildrenInCacheIterator())e++;r._wrappedChildCount=e}}}createSourceFileFromTextInternal(e,t,r){const i=c.StringUtils.hasBom(t);i&&(t=c.StringUtils.stripBom(t));const o=this.getSourceFile(this.createCompilerSourceFileFromText(e,t,r.scriptKind),r);return i&&(o._hasBom=!0),o}createCompilerSourceFileFromText(e,t,r){return this.documentRegistry.createOrUpdateSourceFile(e,this.context.compilerOptions.get(),s.ts.ScriptSnapshot.fromString(t),r)}getSourceFile(e,t){let r=!1;const o=this.nodeCache.getOrCreate(e,()=>{const o=new i.SourceFile(this.context,e);return t.markInProject||this.context.inProjectCoordinator.setSourceFileNotInProject(o),this.addSourceFileToCache(o),r=!0,o});return t.markInProject&&o._markAsInProject(),r&&this.sourceFileAddedEventContainer.fire(o),o}addSourceFileToCache(e){this.sourceFileCacheByFilePath.set(e.getFilePath(),e),this.context.fileSystemWrapper.removeFileDelete(e.getFilePath()),this.directoryCache.addSourceFile(e)}getDirectoryFromPath(e,t){e=this.context.fileSystemWrapper.getStandardizedAbsolutePath(e);let r=this.directoryCache.get(e);return null==r&&this.context.fileSystemWrapper.directoryExistsSync(e)&&(r=this.directoryCache.createOrAddIfExists(e)),null!=r&&t.markInProject&&r._markAsInProject(),r}createDirectoryOrAddIfExists(e,t){const r=this.directoryCache.createOrAddIfExists(e);return null!=r&&t.markInProject&&r._markAsInProject(),r}getDirectoryFromCache(e){return this.directoryCache.get(e)}getDirectoryFromCacheOnlyIfInCache(e){return this.directoryCache.has(e)?this.directoryCache.get(e):void 0}getDirectoriesByDepth(){return this.directoryCache.getAllByDepth()}getOrphanDirectories(){return this.directoryCache.getOrphans()}getSymbolDisplayPart(e){return this.symbolDisplayPartCache.getOrCreate(e,()=>new i.SymbolDisplayPart(e))}getType(e){return(e.flags&s.TypeFlags.TypeParameter)===s.TypeFlags.TypeParameter?this.getTypeParameter(e):this.typeCache.getOrCreate(e,()=>new i.Type(this.context,e))}getTypeParameter(e){return this.typeParameterCache.getOrCreate(e,()=>new i.TypeParameter(this.context,e))}getSignature(e){return this.signatureCache.getOrCreate(e,()=>new i.Signature(this.context,e))}getSymbol(e){return this.symbolCache.getOrCreate(e,()=>new i.Symbol(this.context,e))}getDefinitionInfo(e){return this.definitionInfoCache.getOrCreate(e,()=>new i.DefinitionInfo(this.context,e))}getDocumentSpan(e){return this.documentSpanCache.getOrCreate(e,()=>new i.DocumentSpan(this.context,e))}getReferenceEntry(e){return this.referenceEntryCache.getOrCreate(e,()=>new i.ReferenceEntry(this.context,e))}getReferencedSymbol(e){return this.referencedSymbolCache.getOrCreate(e,()=>new i.ReferencedSymbol(this.context,e))}getReferencedSymbolDefinitionInfo(e){return this.referencedSymbolDefinitionInfoCache.getOrCreate(e,()=>new i.ReferencedSymbolDefinitionInfo(this.context,e))}getDiagnostic(e){return this.diagnosticCache.getOrCreate(e,()=>null!=e.start?new i.DiagnosticWithLocation(this.context,e):new i.Diagnostic(this.context,e))}getDiagnosticWithLocation(e){return this.diagnosticCache.getOrCreate(e,()=>new i.DiagnosticWithLocation(this.context,e))}getDiagnosticMessageChain(e){return this.diagnosticMessageChainCache.getOrCreate(e,()=>new i.DiagnosticMessageChain(e))}getJSDocTagInfo(e){return this.jsDocTagInfoCache.getOrCreate(e,()=>new i.JSDocTagInfo(e))}replaceCompilerNode(e,t){const r=e instanceof i.Node?e.compilerNode:e,o=e instanceof i.Node?e:this.nodeCache.get(e);if(r.kind===s.SyntaxKind.SourceFile&&r.fileName!==t.fileName){const e=o;this.removeCompilerNodeFromCache(r),e._replaceCompilerNodeFromFactory(t),this.nodeCache.set(t,e),this.addSourceFileToCache(e),this.sourceFileAddedEventContainer.fire(e)}else this.nodeCache.replaceKey(r,t),null!=o&&o._replaceCompilerNodeFromFactory(t)}removeNodeFromCache(e){this.removeCompilerNodeFromCache(e.compilerNode)}removeCompilerNodeFromCache(e){if(this.nodeCache.removeByKey(e),e.kind===s.SyntaxKind.SourceFile){const t=e;this.directoryCache.removeSourceFile(t.fileName);const r=this.sourceFileCacheByFilePath.get(t.fileName);this.sourceFileCacheByFilePath.removeByKey(t.fileName),this.documentRegistry.removeSourceFile(t.fileName),null!=r&&this.sourceFileRemovedEventContainer.fire(r)}}addDirectoryToCache(e){this.directoryCache.addDirectory(e)}removeDirectoryFromCache(e){this.directoryCache.remove(e)}forgetNodesCreatedInBlock(t){this.nodeCache.setForgetPoint();let r=!1;try{const e=t((...e)=>{for(const t of e)this.nodeCache.rememberNode(t)});if(null!=e&&"function"==typeof e.then)return r=!0,e.then(()=>this.nodeCache.forgetLastPoint())}finally{r||this.nodeCache.forgetLastPoint()}return e.resolve()}}}).call(this,r("B/eG").default)},r4RK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r("Ankb"),o=r("qYB5");t.DirectoryCache=class{constructor(e){this.context=e,this.directoriesByPath=new o.KeyValueCache,this.sourceFilesByDirPath=new o.KeyValueCache,this.directoriesByDirPath=new o.KeyValueCache,this.orphanDirs=new o.KeyValueCache}has(e){return this.directoriesByPath.has(e)}get(e){if(this.directoriesByPath.has(e))return this.directoriesByPath.get(e);for(const t of this.orphanDirs.getValues())if(o.FileUtils.pathStartsWith(t.getPath(),e))return this.createOrAddIfExists(e)}getOrphans(){return this.orphanDirs.getValuesAsArray()}getAll(){return this.directoriesByPath.getValuesAsArray()}*getAllByDepth(){const e=new o.KeyValueCache;let t=0;for(this.getOrphans().forEach(r),t=Math.min(...Array.from(e.getKeys()));e.getSize()>0;){for(const i of e.get(t)||[])yield i,i.getDirectories().forEach(r);e.removeByKey(t),t++}function r(r){const i=r._getDepth();if(t>i)throw new Error(`For some reason a subdirectory had a lower depth than the parent directory: ${r.getPath()}`);e.getOrCreate(i,()=>[]).push(r)}}remove(e){this.removeFromDirectoriesByDirPath(e),this.directoriesByPath.removeByKey(e),this.orphanDirs.removeByKey(e)}getChildDirectoriesOfDirectory(e){const t=this.directoriesByDirPath.get(e);return null==t?[]:t.getArrayCopy()}getChildSourceFilesOfDirectory(e){const t=this.sourceFilesByDirPath.get(e);return null==t?[]:t.getArrayCopy()}addSourceFile(e){const t=e.getDirectoryPath();this.createOrAddIfExists(t),this.sourceFilesByDirPath.getOrCreate(t,()=>new o.SortedKeyValueArray(e=>e.getBaseName(),o.LocaleStringComparer.instance)).set(e)}removeSourceFile(e){const t=o.FileUtils.getDirPath(e),r=this.sourceFilesByDirPath.get(t);null!=r&&(r.removeByKey(o.FileUtils.getBaseName(e)),r.hasItems()||this.sourceFilesByDirPath.removeByKey(t))}createOrAddIfExists(e){return this.has(e)?this.get(e):(this.fillParentsOfDirPath(e),this.createDirectory(e))}createDirectory(e){const t=new i.Directory(this.context,e);return this.addDirectory(t),t}addDirectory(e){const t=e.getPath(),r=o.FileUtils.getDirPath(t),i=r===t;for(const e of this.orphanDirs.getValues()){const r=e.getPath(),i=o.FileUtils.getDirPath(r);i===r||i!==t||this.orphanDirs.removeByKey(r)}i||this.addToDirectoriesByDirPath(e),this.has(r)||this.orphanDirs.set(t,e),this.directoriesByPath.set(t,e),this.context.fileSystemWrapper.directoryExistsSync(t)||this.context.fileSystemWrapper.queueMkdir(t);for(const t of this.orphanDirs.getValues())e.isAncestorOf(t)&&this.fillParentsOfDirPath(t.getPath())}addToDirectoriesByDirPath(e){if(o.FileUtils.isRootDirPath(e.getPath()))return;const t=o.FileUtils.getDirPath(e.getPath());this.directoriesByDirPath.getOrCreate(t,()=>new o.SortedKeyValueArray(e=>e.getBaseName(),o.LocaleStringComparer.instance)).set(e)}removeFromDirectoriesByDirPath(e){if(o.FileUtils.isRootDirPath(e))return;const t=o.FileUtils.getDirPath(e),r=this.directoriesByDirPath.get(t);null!=r&&(r.removeByKey(o.FileUtils.getBaseName(e)),r.hasItems()||this.directoriesByDirPath.removeByKey(t))}fillParentsOfDirPath(e){const t=[];let r=o.FileUtils.getDirPath(e);for(;e!==r;){if(e=r,r=o.FileUtils.getDirPath(e),this.directoriesByPath.has(e)){for(const e of t)this.createDirectory(e);break}t.unshift(e)}}}}}]);
//# sourceMappingURL=vendor.ts-morph~937a34b0.1b159b42509dc4378035.bundle.map